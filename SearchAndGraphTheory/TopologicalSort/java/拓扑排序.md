# :book: æ‹“æ‰‘æ’åº

## :bookmark_tabs: æ€è·¯ç†è§£

> å›¾ç‰‡ä¸è§£é¢˜æ€è·¯æ‘˜å½•è‡ª [Hasity- AcWing](https://www.acwing.com/user/myspace/index/55289/) å¦‚æœå¯ä»¥ä¸€å®šè¦ç»™åŸä½œè€…ç‚¹ä¸ª ğŸ‘ å“¦~

**ä»€ä¹ˆæ˜¯æ‹“æ‰‘æ’åº?**

- ä¸€ä¸ªæœ‰å‘å›¾ï¼Œå¦‚æœå›¾ä¸­æœ‰å…¥åº¦ä¸º 0 çš„ç‚¹ï¼Œå°±æŠŠè¿™ä¸ªç‚¹åˆ æ‰ï¼ŒåŒæ—¶ä¹Ÿåˆ æ‰è¿™ä¸ªç‚¹æ‰€è¿çš„è¾¹ã€‚

- ä¸€ç›´è¿›è¡Œä¸Šé¢å‡ºå¤„ç†ï¼Œå¦‚æœæ‰€æœ‰ç‚¹éƒ½èƒ½è¢«åˆ æ‰ï¼Œåˆ™è¿™ä¸ªå›¾å¯ä»¥è¿›è¡Œæ‹“æ‰‘æ’åºã€‚

ä¸¾ä¾‹å­

![1.PNG](https://cdn.acwing.com/media/article/image/2022/03/24/55289_bc6dfd68aa-1.PNG)

å¼€å§‹æ—¶ï¼Œå›¾æ˜¯è¿™æ ·çš„çŠ¶æ€ï¼Œå‘ç°`A`çš„**å…¥åº¦ä¸º 0**ï¼Œæ‰€ä»¥**åˆ é™¤Aå’ŒAä¸Šæ‰€è¿çš„è¾¹**ï¼Œç»“æœå¦‚ä¸‹å›¾ï¼š

![2.PNG](https://cdn.acwing.com/media/article/image/2022/03/24/55289_fe8bb6ddaa-2.PNG)

è¿™æ—¶å‘ç°`B`çš„**å…¥åº¦ä¸º 0**ï¼Œ`C`çš„**å…¥åº¦ä¸º 0**ï¼Œæ‰€ä»¥**åˆ é™¤Bå’ŒBä¸Šæ‰€è¿çš„è¾¹ã€Cå’ŒCä¸Šæ‰€è¿çš„è¾¹**ï¼Œç»“æœå¦‚ä¸‹å›¾ï¼š

![3.PNG](https://cdn.acwing.com/media/article/image/2022/03/24/55289_2a0facb8aa-3.PNG)

è¿™æ—¶å‘ç°å‘ç°`Dçš„å…¥åº¦ä¸º 0`ï¼Œæ‰€ä»¥åˆ é™¤`D`å’Œ`D`ä¸Šæ‰€è¿çš„è¾¹(**å¦‚æœæœ‰å°±åˆ **)ï¼Œç»“æœå¦‚ä¸‹å›¾ï¼š

![5.PNG](https://cdn.acwing.com/media/article/image/2022/03/24/55289_51ea275baa-5.PNG)

è¿™æ—¶æ•´ä¸ªå›¾è¢«åˆ é™¤å¹²å‡€ï¼Œæ‰€æœ‰èƒ½è¿›è¡Œæ‹“æ‰‘æ’åºã€‚

> **æ‹“æ‰‘æ’åºæ˜¯é’ˆå¯¹æœ‰å‘å›¾çš„**

> **æ‰€æœ‰çš„è¾¹ éƒ½æ˜¯ ä»å‰æŒ‡å‘åçš„**

> **å¦‚æœæœ‰è‡ªé—­ç¯ é‚£ä¸€å®šä¸å¯èƒ½å­˜åœ¨æ‹“æ‰‘æ’åº**

**:books: å¯ä»¥è¯æ˜çš„æ˜¯ï¼Œæœ‰å‘æ— ç¯å›¾ ä¸€å®šæ˜¯å­˜åœ¨ä¸€ä¸ªæ‹“æ‰‘åºåˆ—çš„ ï¼Œ æ‰€ä»¥æœ‰å‘æ— ç¯å›¾ ä¹Ÿè¢«ç§°ä¹‹ä¸º æ‹“æ‰‘å›¾ã€‚**

**å…¥åº¦ ä¸ å‡ºåº¦ çš„æ¦‚å¿µç†è§£ï¼š**

![image-20220518181155698](./TopologicalSort.png)

> **å…¥åº¦ä¸º 0 çš„ç‚¹ï¼Œè¯´æ˜ ä¸ä¼šæœ‰ ä»»ä½•ç‚¹ æŒ‡å‘è¯¥ç‚¹ï¼Œè¯´æ˜å…¶å¯ä»¥æ’åœ¨å‰é¢ï¼Œæ­¤æ—¶ å°†æ‰€æœ‰å…¥åº¦ä¸º 0 çš„ç‚¹å…¥é˜Ÿã€‚**

> **ç„¶åå°±æ˜¯ä¸€ä¸ª å®½åº¦æœç´¢ï¼ˆBFSï¼‰çš„è¿‡ç¨‹**

```java
Deque dq ;
d[j] è¡¨ç¤º j çš„å…¥åº¦;
while (!dq.isEmpty()){
   	var t = dq.poll();
    æšä¸¾ t çš„æ‰€æœ‰å‡ºè¾¹ t - > j :
    	åˆ æ‰ t - j , d[j]--;
    	if d[j] = 0 ;è¯´æ˜æ­¤æ—¶ j æ²¡æœ‰ä»»ä½•é™åˆ¶äº†å°±å¯ä»¥æ”¾åœ¨æœ€å‰é¢äº†
        dq.offer(j);
}
```

`ä¸€ä¸ª æœ‰å‘æ— ç¯å›¾ ä¸€å®šå­˜åœ¨ä¸€ä¸ªå…¥åº¦ä¸º 0 çš„ç‚¹ã€‚`

## :bookmark_tabs: Yæ€»æ€è·¯è§£é¢˜

[848. æœ‰å‘å›¾çš„æ‹“æ‰‘åºåˆ— - AcWingé¢˜åº“](https://www.acwing.com/problem/content/description/850/)

```java
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.ArrayDeque;
import java.util.Arrays;
import java.util.Deque;

/***
 * @authorï¼š Alascanfu
 * @date ï¼š Created in 2022/5/18 21:43
 * @descriptionï¼š TopologicalSort æ‹“æ‰‘æ’åº è§£å†³æœ‰å‘å›¾çš„æ‹“æ‰‘åºåˆ—
 * @modified Byï¼š Alascanfu
 **/
class Main {
    static int N = 100010;
    static int M = 2 * N ;
    // é‚»æ¥è¡¨ è®°å½•
    static int[] h , e , ne ;
    static int idx ;
    // é˜Ÿåˆ—
    static Deque<Integer> dq ;
    // d[i] ç”¨äºè®°å½•iç‚¹ çš„å…¥åº¦
    static int[] d ;
    
    static int cnt ;
    static int[] top ;
    
    static void init(){
        idx = 0 ;
        h = new int[N];
        e = new int[M];
        ne = new int[M];
        d = new int[N];
        cnt = 0 ;
        dq = new ArrayDeque<>();
        top = new int[N];
        Arrays.fill(h,-1);
    }
    
    // å»º è¾¹
    static void add(int a , int b){
        e[idx] = b;
        ne[idx] = h[a];
        h[a] = idx ++;
    }
    
    static boolean topologicalSort(int n ){
        while (!dq.isEmpty()){
            int u = dq.poll();
            for (int i = h[u] ; i != -1 ; i = ne[i]){
                int j = e[i];
                d[j] --;
                if (d[j] == 0){
                    dq.offer(j);
                    top[cnt ++] = j;
                }
            }
        }
        return cnt == n;
    }
    
    public static void main(String[] args) throws IOException {
        InputStreamReader in = new InputStreamReader(System.in);
        BufferedReader br = new BufferedReader(in);
        init();
        args = br.readLine().split(" ");
        int n = Integer.parseInt(args[0]);
        int m = Integer.parseInt(args[1]);
        while (m-- > 0){
            args = br.readLine().split(" ");
            int x = Integer.parseInt(args[0]);
            int y = Integer.parseInt(args[1]);
            add(x,y);
            d[y] ++ ;
        }
        
        for (int i = 1 ; i <= n ; i++){
            if (d[i] == 0){
                dq.offer(i);
                top[cnt++] = i;
            }
        }
        
        if (topologicalSort(n)){
            for (int i = 0 ; i< n ; i++){
                System.out.print(top[i] + " ");
            }
        }else {
            System.out.print(-1);
        }
    }
}
```

