# ğŸ“– æœ€çŸ­è·¯ç®—æ³•æ€æƒ³å­¦ä¹ 

## :bookmark_tabs:å¸¸è§æœ€çŸ­è·¯é—®é¢˜åˆ†ç±»

![image-20220519185351350](./ShortestPathsAlgorithm.png)

**æºç‚¹ï¼šèµ·ç‚¹**

**æ±‡ç‚¹ï¼šç»ˆç‚¹**

### :bookmark: **å•æºæœ€çŸ­è·¯**

> **å•æºæœ€çŸ­è·¯**

**:books:æ±‚è§£çš„æ˜¯ï¼šä»ä¸€ä¸ªç‚¹åˆ°å…¶å®ƒæ‰€æœ‰ç‚¹çš„æœ€çŸ­è·ç¦»**

> **æ‰€æœ‰è¾¹æƒéƒ½æ˜¯æ­£æ•° n è¡¨ç¤ºç‚¹çš„æ•°é‡ m è¡¨ç¤ºè¾¹çš„æ•°é‡**

- æœ´ç´ çš„ Dijkstra ç®—æ³• **æ—¶é—´å¤æ‚åº¦ï¼š$O(n^2)$** â€”â€” ç¨ å¯†å›¾
- å †ä¼˜åŒ–ç‰ˆ çš„ Dijkstra ç®—æ³• **æ—¶é—´å¤æ‚åº¦ï¼š$O(mlogn)$** â€”â€” ç¨€ç–å›¾

> **å­˜åœ¨è´Ÿæƒè¾¹**

**:books: æ³¨æ„ï¼šå¦‚æœæœ‰ä¸è¶…è¿‡ k æ¡è¾¹çš„æœ€çŸ­è·¯ç”¨ Bellman-Ford ç®—æ³•**

- Bellman-Ford **æ—¶é—´å¤æ‚åº¦ï¼š$O(n m)$** 
- SPFA **æ—¶é—´å¤æ‚åº¦ï¼šä¸€èˆ¬ï¼š$O( m )$  æœ€åï¼š$ O(n m)$**  SPFA å®é™…ä¸Šæ˜¯å¯¹Bellman-Ford ç®—æ³•çš„ä¼˜åŒ–

**:books: ç»è¿‡ä¸è¶…è¿‡ k æ¡è¾¹çš„æœ€çŸ­è·¯æ˜¯æ— æ³•ä½¿ç”¨ SPFA ç®—æ³•æ¥è¿›è¡Œå¤„ç†çš„ã€‚**

### :bookmark: **å¤šæºæ±‡æœ€çŸ­è·¯**

> **å¤šæºæ±‡æœ€çŸ­è·¯**

:books: **æ±‚è§£çš„æ˜¯ï¼šä»å…¶ä¸­æŸä¸€ä¸ªç‚¹èµ°åˆ°å¦å¤–ä¸€ä¸ªç‚¹çš„æœ€çŸ­è·ç¦»**

- Floyd ç®—æ³• **æ—¶é—´å¤æ‚åº¦ï¼š$O(n^3)$** 

## :bookmark_tabs: æœ€çŸ­è·¯è€ƒå¯Ÿç‚¹

> **æœ€çŸ­è·¯ç®—æ³•ä¸ä¼šå»è€ƒå¯Ÿç®—æ³•åŸç†çš„æ­£ç¡®æ€§**

- **ä¾§é‡ç‚¹ä¸º å¦‚ä½•å°†åŸé—®é¢˜æŠ½è±¡ä¸ºå›¾ â€”â€” å»ºå›¾**

- **äº†è§£å®ç°æ€è·¯ ï¼Œ å®ç°çš„ä»£ç æ¨¡æ¿**

## :bookmark_tabs: æœ´ç´ çš„ Dijkstra ç®—æ³•

> **ä¾‹é¢˜**
>
> #### [743. ç½‘ç»œå»¶è¿Ÿæ—¶é—´](https://leetcode.cn/problems/network-delay-time/)
>
> #### [847. è®¿é—®æ‰€æœ‰èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„](https://leetcode.cn/problems/shortest-path-visiting-all-nodes/)

> **æ­¥éª¤ä¸€ï¼šåˆå§‹åŒ–è·ç¦» ä¸ åˆå§‹åŒ–æ˜¯å¦å·²å…·æœ‰æœ€çŸ­è·¯**

éœ€è¦å¼€ä¸€ä¸ª `dist[]` æ•°ç»„ç”¨äºè®°å½• åˆ°è¾¾èµ·ç‚¹çš„è·ç¦»ï¼Œå¦‚ `dist[1] = 0` è¡¨ç¤ºçš„æ˜¯ `1 å·ç‚¹è·ç¦»èµ·ç‚¹è·ç¦»ä¸º 0`ï¼Œå…¶ä½™ **dist[i] =  $+\infty$** 

éœ€è¦å¼€ä¸€ä¸ª`st[]` boolean æ•°ç»„ ç”¨äºè®°å½•å¦‚æœè¯¥ç‚¹ i å·²ç»ç¡®å®šæœ€çŸ­è·¯è·ç¦»

> **æ­¥éª¤äºŒï¼šè¿­ä»£è¿‡ç¨‹ **

![image-20220519200039918](./Dijkstra01.png)

```python
# ä¼ªä»£ç 
for i in n :
    t = -1
    for j in n:
        if j not in s & (t == -1 || dist[t] > dist[j])
        	t = j
    j in s
    for j in n:
        dist[j] = min(dist[j],dist[t] + g[t][j])
if dist[n] != nil return dist[n]
else return dist[n]
```

:books: æ³¨æ„ç‚¹ï¼šå› ä¸º $n^2 \approx m$ æ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªç¨ å¯†å›¾ ï¼Œç¨ å¯†å›¾ç”¨é‚»æ¥çŸ©é˜µæ¥å­˜å‚¨ 

[849. Dijkstraæ±‚æœ€çŸ­è·¯ I - AcWingé¢˜åº“](https://www.acwing.com/problem/content/851/)

```java
import java.io.*;
import java.util.*;

class Main{
    static int n , m;
    static int N = 510 ;
    static int [][] g ;
    static int [] dist ;
    static boolean[] st ;
    static int INFTY = 10010;
    
    static void init(){
        g = new int[N][N];
        dist = new int[N];
        st = new boolean[N];
        Arrays.fill(dist,INFTY);
        for (int i = 1 ; i<= n ; i++){
            Arrays.fill(g[i],INFTY);
        }
        dist[1] = 0;
    }
    
    static int dijkstra(){
        for (int i = 1 ;i<= n ;i++){
            int t = -1 ;
            for (int j = 1 ; j<= n ; j++){
                if (!st[j] && (t == -1 || dist[t] > dist[j])){
                    t = j ;
                }
            }
            st[t] = true ;
            for (int j = 1 ; j <= n ;j++){
                dist[j] = Math.min(dist[j],dist[t] + g[t][j]);
            }
        }
        if (dist[n] == 10010){
            return -1;
        }else{
            return dist[n];
        }
    }
    
    public static void main(String[] args )throws IOException{
        InputStreamReader in = new InputStreamReader(System.in);
        BufferedReader br = new BufferedReader(in);
        args = br.readLine().split(" ");
        n = Integer.parseInt(args[0]);
        m = Integer.parseInt(args[1]);
        init();
        while (m-- > 0){
            args = br.readLine().split(" ");
            int x = Integer.parseInt(args[0]);
            int y = Integer.parseInt(args[1]);
            int z = Integer.parseInt(args[2]);
            if (x == y){
                g[x][y] = 0;
            }else {
                g[x][y] = Math.min(g[x][y] , z);
            }
        }
        System.out.print(dijkstra());
    }
}
```

## :bookmark_tabs: å †ä¼˜åŒ–ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰çš„ Dijkstra ç®—æ³•

![image-20220522153446741](R:/Alascanfu-algorithm.git.io/SearchAndGraphTheory/directionGraph02.png)

> **ä»€ä¹ˆæ—¶å€™é‡‡ç”¨å †ä¼˜åŒ–ç‰ˆ çš„ Dijkstra ç®—æ³•å‘¢ï¼Ÿ**

å¦‚æœæ˜¯ç¨€ç–å›¾æ—¶ å³ $n \approx m$ æ—¶æ­¤æ—¶ç”¨é‚»æ¥æ•°ç»„æ¥è¿›è¡Œå­˜å‚¨æ—¶ ï¼Œå†…å­˜å°±ä¼šçˆ†æ‰ï¼Œæ‰€ä»¥å°±éœ€è¦å †ä¼˜åŒ–ã€‚ç©ºé—´ä¼˜åŒ–çš„åŒæ—¶ã€‚

**æŸ¥çœ‹ä¸€ä¸‹ç®—æ³•ä¸­ï¼Œå“ªä¸ªåŒºå—è®¡ç®—è€—æ—¶æœ€é•¿ï¼Œå¯¹å…¶è¿›è¡Œä¼˜åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ¸…æ¥šçš„å‘ç°æ›´æ–°è·ç¦»æ—¶çš„æ“ä½œ æ—¶é—´å¤æ‚åº¦ä¸º $O(n^2)$ çš„æ•…ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¹‹å‰å­¦è¿‡çš„å †ï¼Œç”¨ä¸€å †æ•°ä¸­æ‰¾åˆ°æœ€å°çš„æ•°ã€‚ä½¿å¾—å…¶ å˜ä¸º O(1)**

> **ä¼˜åŒ–çš„ä¼ªä»£ç **

```python
é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ— ä¼˜å…ˆé˜Ÿåˆ—æ˜¯æŒ‰ç…§ è·ç¦»è¿›è¡Œæ¯”è¾ƒæ’å…¥çš„
PriorityQueue<int[]> pq 
a[0] ä»£è¡¨çš„æ˜¯å“ªä¸ªç‚¹ a[1] ä»£è¡¨çš„æ˜¯è·ç¦» 
æ’åºè§„åˆ™ (a,b)->{return a[1] - b[1];};

while (!pq.isEmpty()){
    int[] cur = pq.poll();
    int t = cur[0] , distance = cur[1];
    if (st[t] )continue;
    st[t] = true ;
    for (int i = h[t] ; i != -1;i = ne[i]){
        int j = e[i];
        if (dist[j] > distance + w[i]){
            dist[j] = distance + w[i];
            pq.offer(new int[]{j , dist[j]});
        }
    }
}
```

[850. Dijkstraæ±‚æœ€çŸ­è·¯ II - AcWingé¢˜åº“](https://www.acwing.com/problem/content/description/852/)

```java
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.Arrays;
import java.util.PriorityQueue;

/***
 * @authorï¼š Alascanfu
 * @date ï¼š Created in 2022/5/22 16:37
 * @descriptionï¼š Dijkstra å †ä¼˜åŒ–ç‰ˆåšæ³• æ—¶é—´å¤æ‚åº¦é€šå¸¸ä¸º O(m*log_n)
 * @modified Byï¼š Alascanfu
 **/
class Main {
    static int N = 1000010 ;
    static int M = 2 * N ;
    /** INFTY çš„ distance å¿…é¡»å¤§äº N * 10000 */
    static int INFTY = 0x3f3f3f3f;
    static int n , m ;
    static int[] h , e , ne , w ;
    static int idx ;
    static PriorityQueue<int[]> pq;
    static int[] dist ;
    static boolean[] st ;
    
    static void init(){
        h = new int[N];
        e = new int[M];
        ne = new int[M];
        w = new int[N];
        idx = 0 ;
        Arrays.fill(h,-1);
        pq = new PriorityQueue<>((a,b)->{
            return a[1] - b[1];
        });
        dist = new int[N];
        st = new boolean[N];
    }
    
    static int dijkstra(){
        while (!pq.isEmpty()){
            int[] cur = pq.poll();
            int t = cur[0] ,distance = cur[1];
            if (st[t]){
                continue;
            }
            st[t] = true ;
            for (int i = h[t] ; i != -1 ; i = ne[i]) {3
                int j = e[i];
                if (dist[j] > distance + w[i]) {
                    dist[j] = distance + w[i];
                    pq.offer(new int[]{j, dist[j]});
                }
            }
        }
        return dist[n] == INFTY ? -1 : dist[n];
    }
    
    public static void main(String[] args) throws IOException {
        InputStreamReader in = new InputStreamReader(System.in);
        BufferedReader br = new BufferedReader(in);
        args = br.readLine().split(" ");
        n = Integer.parseInt(args[0]);
        m = Integer.parseInt(args[1]);
        // å› ä¸ºæ˜¯ä¸€ä¸ªç¨€ç–å›¾ æ‰€ä»¥é‡‡ç”¨é‚»æ¥è¡¨å­˜å‚¨
        init();
        while (m -- > 0 ){
            args = br.readLine().split(" ");
            int a = Integer.parseInt(args[0]);
            int b = Integer.parseInt(args[1]);
            int c = Integer.parseInt(args[2]);
            add(a,b,c);
        }
        Arrays.fill(dist,INFTY);
        dist[1] = 0 ;
        pq.offer(new int[]{1, 0 });
        System.out.println(dijkstra());
    }
    
    static void add(int a, int b, int c) {
        e[idx] = b ; w[idx] = c ; ne[idx] = h[a] ; h[a] = idx++;
    }
}
```

