## äºŒç»´å·®åˆ†æ€æƒ³ç®—æ³•å…¬å¼ä»¥åŠä¾‹é¢˜

**ğŸ“æ€æƒ³ç†è§£â€”â€”æ—æ·±æ—¶è§é¹¿çš„é¢˜è§£ï¼š**

- å¦‚æœæ‰©å±•åˆ°äºŒç»´ï¼Œ**æˆ‘ä»¬éœ€è¦è®©äºŒç»´æ•°ç»„è¢«é€‰ä¸­çš„å­çŸ©é˜µä¸­çš„æ¯ä¸ªå…ƒç´ çš„å€¼åŠ ä¸Šc,æ˜¯å¦ä¹Ÿå¯ä»¥è¾¾åˆ°O(1)çš„æ—¶é—´å¤æ‚åº¦ã€‚**ç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œè€ƒè™‘äºŒç»´å·®åˆ†ã€‚

  `a[][]`æ•°ç»„æ˜¯`b[][]`æ•°ç»„çš„å‰ç¼€å’Œæ•°ç»„ï¼Œé‚£ä¹ˆ`b[][]`æ˜¯`a[][]`çš„å·®åˆ†æ•°ç»„

  åŸæ•°ç»„ï¼š` a[i][j]`

  æˆ‘ä»¬å»æ„é€ å·®åˆ†æ•°ç»„ï¼š `b[i][j]`

  ä½¿å¾—`a`æ•°ç»„ä¸­`a[i][j]`æ˜¯`b`æ•°ç»„`å·¦ä¸Šè§’(1,1)åˆ°å³ä¸‹è§’(i,j)`æ‰€åŒ…å›´çŸ©å½¢å…ƒç´ çš„å’Œã€‚

>  å¦‚ä½•æ„é€ bæ•°ç»„å‘¢ï¼Ÿ

æˆ‘ä»¬å»é€†å‘æ€è€ƒã€‚

åŒä¸€ç»´å·®åˆ†ï¼Œæˆ‘ä»¬**æ„é€ äºŒç»´å·®åˆ†æ•°ç»„**ç›®çš„**æ˜¯ä¸ºäº† è®©åŸäºŒç»´æ•°ç»„**aä¸­æ‰€**é€‰ä¸­å­çŸ©é˜µä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ åŠ ä¸Šcçš„æ“ä½œ**ï¼Œå¯ä»¥ç”±`O(n*n)`çš„æ—¶é—´å¤æ‚åº¦ä¼˜åŒ–æˆ`O(1)`

å·²çŸ¥åŸæ•°ç»„`aä¸­è¢«é€‰ä¸­çš„å­çŸ©é˜µ`ä¸º `ä»¥(x1,y1)ä¸ºå·¦ä¸Šè§’ï¼Œä»¥(x2,y2)ä¸ºå³ä¸‹è§’æ‰€å›´æˆçš„çŸ©å½¢åŒºåŸŸ`;

å§‹ç»ˆè¦è®°å¾—ï¼Œ**aæ•°ç»„æ˜¯bæ•°ç»„çš„å‰ç¼€å’Œæ•°ç»„**ï¼Œæ¯”å¦‚å¯¹`b`æ•°ç»„çš„`b[i][j]`çš„ä¿®æ”¹ï¼Œ**ä¼šå½±å“åˆ°aæ•°ç»„ä¸­ä»`a[i][j]`åŠå¾€åçš„æ¯ä¸€ä¸ªæ•°ã€‚**

å‡å®šæˆ‘ä»¬å·²ç»æ„é€ å¥½äº†bæ•°ç»„ï¼Œç±»æ¯”ä¸€ç»´å·®åˆ†ï¼Œ`æˆ‘ä»¬æ‰§è¡Œä»¥ä¸‹æ“ä½œ
æ¥ä½¿è¢«é€‰ä¸­çš„å­çŸ©é˜µä¸­çš„æ¯ä¸ªå…ƒç´ çš„å€¼åŠ ä¸Šc`

```java
b[x1][y1] += c;
b[x2+1][y1] -= c;
b[x1][y2+1] -= c;
b[x2+1][y2+1] += c;
```

- **æ ¹æ®å›¾å½¢æ¥ç†è§£â€”â€”æ—æ·±æ—¶è§é¹¿**

![<img src="https://img-blog.csdnimg.cn/20201217171134926.png"   width="50%">](https://img-blog.csdnimg.cn/20201217174836198.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTYyOTI4NQ==,size_16,color_FFFFFF,t_70)

`b[x1][ y1 ] +=c `;å¯¹åº”å›¾1 ,**è®©æ•´ä¸ªaæ•°ç»„ä¸­è“è‰²çŸ©å½¢é¢ç§¯çš„å…ƒç´ éƒ½åŠ ä¸Šäº†cã€‚**
`b[x1,][y2+1]-=c `å¯¹åº”å›¾2 ,è®©**æ•´ä¸ªaæ•°ç»„ä¸­ç»¿è‰²çŸ©å½¢é¢ç§¯çš„å…ƒç´ å†å‡å»c**ï¼Œä½¿`å…¶å†…å…ƒç´ ä¸å‘ç”Ÿæ”¹å˜`ã€‚
`b[x2+1][y1]- =c ` å¯¹åº”å›¾3 ,è®©**æ•´ä¸ªaæ•°ç»„ä¸­ç´«è‰²çŸ©å½¢é¢ç§¯çš„å…ƒç´ å†å‡å»c**ï¼Œä½¿`å…¶å†…å…ƒç´ ä¸å‘ç”Ÿæ”¹å˜`ã€‚
`b[x2+1][y2+1]+=c` å¯¹åº”å›¾4,,è®©æ•´ä¸ªaæ•°ç»„ä¸­çº¢è‰²çŸ©å½¢é¢ç§¯çš„å…ƒç´ å†åŠ ä¸Šcï¼Œ**çº¢è‰²å†…çš„ç›¸å½“äºè¢«å‡äº†ä¸¤æ¬¡ï¼Œå†åŠ ä¸Šä¸€æ¬¡cï¼Œæ‰èƒ½ä½¿å…¶æ¢å¤ã€‚**

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20201217170336254.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTYyOTI4NQ==,size_16,color_FFFFFF,t_70)

**å¦‚ä½•æ„é€ `b[]`å·®åˆ†æ•°ç»„ï¼š**

> å…ˆç”±ä¸€ç»´å·®åˆ†ç†è§£ï¼Œç„¶åè½¬æ¢ä¸ºäºŒç»´å·®åˆ†æ€è·¯

è¿™é‡Œé‡‡ç”¨çš„æ˜¯insertæ–¹å¼`æ— éœ€è€ƒè™‘å¦‚ä½•æ„å»ºå·®åˆ†æ•°ç»„`ï¼Œå½“æ•°ç»„`a[]`å„ä¸ªå…ƒç´ å‡ä¸º0æ—¶,ä½œä¸º`a[]`çš„å·®åˆ†æ•°ç»„ `b[]`çš„æ¯ä¸ªå…ƒç´ ä¹Ÿæ˜¯0ï¼Œä½†æ˜¯å®é™…å½“ä¸­`a[]`çš„æ¯ä¸ªå…ƒç´ è‚¯å®šä¸ä¸º0ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦åœ¨`æ•°ç»„b[]`å¯¹åº”çš„åŒºé—´æ’å…¥`c = a[i]`å¹¶ä¸”å°†åç½®ä½ç½®çš„å…ƒç´ å‡å»ä¸Šä¸€ä¸ªå‰ç¼€å’Œ`a[i-1]`çš„å€¼å°±å¯ä»¥äº†ã€‚

**ğŸ“yæ€»æ¨¡æ¿é¢˜è§£ï¼š**

```java
/***
 * @authorï¼š Alascanfu
 * @date ï¼š Created in 2022/3/20 12:36
 * @descriptionï¼š åˆ·é¢˜ä¸“ç”¨
 * @modified Byï¼š Alascanfu
 **/
import java.io.*;
import java.util.*;

class Main{
    static int N = 1010;
    static int [][] a,b;
    static void init(){
        a = new int[N][N];
        b = new int[N][N];
    }
    
    static void insert(int x1,int y1 ,int x2 ,int y2 ,int c){
        b[x1][y1] += c;
        b[x2+1][y1] -= c;
        b[x1][y2+1] -= c;
        b[x2+1][y2+1] += c;
    }
    
    public static void main(String[] args)throws IOException{
        InputStreamReader in = new InputStreamReader(System.in);
        BufferedReader br = new BufferedReader(in);
        init();
        String[] params = br.readLine().split(" ");
        int n = Integer.parseInt(params[0]);
        int m = Integer.parseInt(params[1]);
        int q = Integer.parseInt(params[2]);
        
        for (int i =1 ;i<= n;i++){
            String[] params1 = br.readLine().split(" ");
            for (int j = 1;j<= m;j++){
                a[i][j] = Integer.parseInt(params1[j-1]);
                insert(i,j,i,j,a[i][j]);
            }
        }
        
        while(q-- > 0){
            String[] params2 = br.readLine().split(" ");
            int x1 = Integer.parseInt(params2[0]);
            int y1 = Integer.parseInt(params2[1]);
            int x2 = Integer.parseInt(params2[2]);
            int y2 = Integer.parseInt(params2[3]);
            int c = Integer.parseInt(params2[4]);
            insert(x1,y1,x2,y2,c);
        }
        for (int i = 1;i<= n;i++){
            for (int j = 1;j<= m;j++){
                b[i][j] += b[i-1][j] + b[i][j-1] - b[i-1][j-1];
                System.out.print(b[i][j] + " ");
            }
            System.out.println();
        }
    }
}
```
