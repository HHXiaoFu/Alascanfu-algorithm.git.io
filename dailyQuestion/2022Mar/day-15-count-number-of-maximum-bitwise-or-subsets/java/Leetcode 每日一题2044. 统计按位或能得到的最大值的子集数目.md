# é¢˜ç›®
>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œè¯·ä½ æ‰¾å‡º nums å­é›† æŒ‰ä½æˆ– å¯èƒ½å¾—åˆ°çš„ æœ€å¤§å€¼ ï¼Œå¹¶è¿”å›æŒ‰ä½æˆ–èƒ½å¾—åˆ°æœ€å¤§å€¼çš„ ä¸åŒéç©ºå­é›†çš„æ•°ç›® ã€‚

>å¦‚æœæ•°ç»„ a å¯ä»¥ç”±æ•°ç»„ b åˆ é™¤ä¸€äº›å…ƒç´ ï¼ˆæˆ–ä¸åˆ é™¤ï¼‰å¾—åˆ°ï¼Œåˆ™è®¤ä¸ºæ•°ç»„ a æ˜¯æ•°ç»„ b çš„ä¸€ä¸ª å­é›† ã€‚å¦‚æœé€‰ä¸­çš„å…ƒç´ ä¸‹æ ‡ä½ç½®ä¸ä¸€æ ·ï¼Œåˆ™è®¤ä¸ºä¸¤ä¸ªå­é›† ä¸åŒ ã€‚

>å¯¹æ•°ç»„ a æ‰§è¡Œ æŒ‰ä½æˆ– ï¼Œç»“æœç­‰äº a[0] OR a[1] OR ... OR a[a.length - 1]ï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰ã€‚



ç¤ºä¾‹1ï¼š


```txt
è¾“å…¥ï¼šnums = [3,1]
è¾“å‡ºï¼š2
è§£é‡Šï¼šå­é›†æŒ‰ä½æˆ–èƒ½å¾—åˆ°çš„æœ€å¤§å€¼æ˜¯ 3 ã€‚æœ‰ 2 ä¸ªå­é›†æŒ‰ä½æˆ–å¯ä»¥å¾—åˆ° 3 ï¼š
- [3]
- [3,1]
```

ç¤ºä¾‹2ï¼š
```txt
è¾“å…¥ï¼šnums = [2,2,2]
è¾“å‡ºï¼š7
è§£é‡Šï¼š[2,2,2] çš„æ‰€æœ‰éç©ºå­é›†çš„æŒ‰ä½æˆ–éƒ½å¯ä»¥å¾—åˆ° 2 ã€‚æ€»å…±æœ‰ 23 - 1 = 7 ä¸ªå­é›†ã€‚
```
ç¤ºä¾‹3ï¼š
```txt
è¾“å…¥ï¼šnums = [3,2,1,5]
è¾“å‡ºï¼š6
è§£é‡Šï¼šå­é›†æŒ‰ä½æˆ–å¯èƒ½çš„æœ€å¤§å€¼æ˜¯ 7 ã€‚æœ‰ 6 ä¸ªå­é›†æŒ‰ä½æˆ–å¯ä»¥å¾—åˆ° 7 ï¼š
- [3,5]
- [3,1,5]
- [3,2,5]
- [3,2,1,5]
- [2,5]
- [2,1,5]
```


## æç¤º

- `1 <= nums.length <= 16`
- `1 <= nums[i] <= 105`



## ğŸ“æ€è·¯ğŸ“

**æœ¬é¢˜è€ƒæŸ¥çŸ¥è¯†ç‚¹**
- æ€è·¯ï¼šæœ€è¿‘åšäº†å¾ˆå¤šå…³äºdfså’Œbfsçš„é¢˜ï¼Œçœ‹åˆ°è¿™é“é¢˜çš„ç¬¬ä¸€æ¬¡å°è¯•å°±æ˜¯æ·±æœã€‚
- ä½†æ˜¯æ·±æœä¹‹å‰æˆ‘ä»¬`å¿…é¡»è¦çŸ¥é“å½“å‰æ•°ç»„çš„æŒ‰ä½æˆ–çš„æœ€å¤§å€¼`ï¼Œè¿™ä¸ªå¾ˆå®¹æ˜“æ±‚å‡ºæ¥ï¼Œ`åªéœ€è¦é€ä½å¯¹è¯¥æ•°ç»„å…ƒç´ æˆ–è¿ç®—å³å¯è·å¾—æœ€å¤§çš„æŒ‰ä½æˆ–æœ€å¤§å€¼`ã€‚

**ğŸ“å¾—åˆ°è¿™ä¸ªæœ€å¤§å€¼äº†æˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œæ·±æœäº†**

- æ·±æœçš„`å‰ææ˜¯è¦å…ˆæ‰¾åˆ°é€’å½’çš„è·³å‡ºæ¡ä»¶`ï¼Œå¾ˆå®¹æ˜“çŸ¥é“å½“å’±ä»¬çš„å…ƒç´ èµ·å§‹åæ ‡`æ·±æœåˆ°æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ çš„æ—¶å€™`å°±å¯ä»¥ç»ˆæ­¢é€’å½’äº†ï¼Œç„¶å`å°±æ˜¯å¯¹å½“å‰å­é›†æ˜¯å¦æ»¡è¶³å…¶æœ€å¤§æŒ‰ä½æˆ–å€¼è¿›è¡Œåˆ¤å®š`ï¼Œè®°å½•ç»“æœå€¼ã€‚
- æ—¢ç„¶å¦‚æ­¤ï¼Œæˆ‘ä»¬å°±éœ€è¦çŸ¥é“æ·±æœçš„åˆ°åº•æ˜¯å•¥ï¼Œç„¶åæ‰èƒ½å†™å‡ºé€’å½’æ·±æœæ–¹å‘ï¼Œå¯¹äº`æ¯æ¬¡æŒ‰ä½æˆ–è¿ç®—`ï¼Œå¯ä»¥`å¯¹å½“å‰ä½è¿›è¡Œæˆ–è¿ç®—æˆ–è€…ä¸è¿›è¡Œæˆ–è¿ç®—ä¸¤ç§æƒ…å†µ`(**å³å­é›†ä¸­æ˜¯å¦åŒ…å«è¯¥å…ƒç´ æˆ–è€…ä¸åŒ…å«è¯¥å…ƒç´ **)ï¼Œå¯¹è¿™äº›æƒ…å†µè¿›è¡Œæ·±æœåˆ¤æ–­ï¼Œè®°å½•æœæˆ–ä¸æœçš„æˆ–è¿ç®—å€¼ä¸é€’å½’ç»ˆæ­¢æ¡ä»¶ä¸­çš„æœ€å¤§æˆ–è¿ç®—å€¼è¿›è¡Œæ¯”è¾ƒè®°å½•ã€‚
****
> [ä¸‰å¶å§å§çš„çŠ¶å‹æ€è·¯](https://leetcode-cn.com/problems/count-number-of-maximum-bitwise-or-subsets/solution/by-ac_oier-dos6/)

çŠ¶å‹DPçœŸçš„å¾ˆéš¾ï¼Œä¼šæ…¢æ…¢æŒæ¡çš„~
## â­ä»£ç å®ç°â­
**DFSæ·±æœå¤„ç†é—´æ¥è¿”å›ç»“æœå€¼**
```java
class Solution {
    int res = 0 ;
    public int countMaxOrSubsets(int[] nums) {
        int maxOfBitOr = nums[0];
        for (int i : nums)maxOfBitOr |= i;
        dfs(nums,0,0,maxOfBitOr);
        return res;
    }

    void dfs(int[] nums,int u,int val,int maxOfBitOr){
    	// é€’å½’ç»ˆæ­¢æ¡ä»¶ è·³å‡ºé€’å½’çš„æ—¶å€™
        if (nums.length == u){
        	// å¯¹æŒ‰ä½æˆ–è¿ç®—çš„æœ€å¤§å€¼è¿›è¡Œåˆ¤å®š å¦‚æœç¬¦åˆæ¡ä»¶ç»“æœ+1
            if (val == maxOfBitOr)
                res ++;
            // å¦‚æœä¸ç¬¦åˆæœ€å¤§å€¼ é‚£è¯´æ˜å½“å‰å­é›†å¯ä»¥ç›´æ¥æ·˜æ±°ä¸è®°å½•
            return ;
        }
        // å¯¹ä¸‹ä¸€ä¸ªå…ƒç´ è¿›è¡Œæˆ–è¿ç®— æˆ–è€…ä¸è¿›è¡Œæˆ–è¿ç®—çš„æ·±æœæƒ…å†µ å³æ˜¯å¦æ·»åŠ è¯¥å…ƒç´ åˆ°å½“å‰å­é›†ä¸­ ç¬¦åˆæŒ‰ä½æˆ–è¿ç®—æœ€å¤§å€¼çš„ç¬¦åˆæ¡ä»¶
        dfs(nums,u+1,val,maxOfBitOr);
        dfs(nums,u+1,val|nums[u],maxOfBitOr);
    }
}
```

- **æ—¶é—´å¤æ‚åº¦:** O($n + 2^n$)  
- **ç©ºé—´å¤æ‚åº¦:** `O(1)`  å¿½ç•¥é€’å½’é¢å¤–ç©ºé—´æ¶ˆè€—ã€‚

**DFSæ·±æœç›´æ¥è¿”å›ç»“æœå€¼**
```java
class Solution {
    int dfs(int u ,int val,int[] nums,int maxOfBitOr){
        if (u == nums.length){
            if (val == maxOfBitOr)return 1;
            return 0;
        }
        return dfs(u+1,val,nums,maxOfBitOr)+dfs(u+1,val | nums[u] ,nums,maxOfBitOr);
    }
    public int countMaxOrSubsets(int[] nums) {
        int maxOfBitOr = 0;
        for (int i: nums)maxOfBitOr|=i;
        return dfs(0,0,nums,maxOfBitOr);
    }
}
```

- **æ—¶é—´å¤æ‚åº¦:** O($n + 2^n$)  
- **ç©ºé—´å¤æ‚åº¦:** `O(1)`  å¿½ç•¥é€’å½’é¢å¤–ç©ºé—´æ¶ˆè€—ã€‚


## è¿è¡Œç»“æœ
**DFSæ·±æœ**

![G3\]XTO4RT1OK0HD2T_N5I6Y.png](https://pic.leetcode-cn.com/1647316027-ZiyCvV-G3%5DXTO4RT1OK0HD2T_N5I6Y.png)

