# é¢˜ç›®
>ç»™å®šä¸€ä¸ªäºŒå‰æœç´¢æ ‘ root å’Œä¸€ä¸ªç›®æ ‡ç»“æœ kï¼Œå¦‚æœ BST ä¸­å­˜åœ¨ä¸¤ä¸ªå…ƒç´ ä¸”å®ƒä»¬çš„å’Œç­‰äºç»™å®šçš„ç›®æ ‡ç»“æœï¼Œåˆ™è¿”å› trueã€‚



ç¤ºä¾‹1ï¼š

![image.png](https://pic.leetcode-cn.com/1647848785-YSLWCn-image.png)

```txt
è¾“å…¥: root = [5,3,6,2,4,null,7], k = 9
è¾“å‡º: true
```
ç¤ºä¾‹2ï¼š
![image.png](https://pic.leetcode-cn.com/1647848781-GldjFt-image.png)


```txt
è¾“å…¥: root = [5,3,6,2,4,null,7], k = 28
è¾“å‡º: false
```
## æç¤º
- äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°çš„èŒƒå›´æ˜¯  [1, $10^4$].
- $-10^4 <= Node.val <= 10^4$
- root ä¸ºäºŒå‰æœç´¢æ ‘
- $-10^5 <= k <= 10^5$
## ğŸ“æ€è·¯ğŸ“

**æœ¬é¢˜è€ƒæŸ¥çŸ¥è¯†ç‚¹**
- æ€è·¯1ï¼šå¾ˆå®¹æ˜“å°±èƒ½æƒ³åˆ°çš„æ–¹æ³•å°±æ˜¯`é€šè¿‡éå†ä¸€ä¸‹è¯¥é¢—æ ‘ç”¨ä¸€ä¸ªSetè®°å½•å½“å‰å·²ç»åœ¨æ ‘ä¸­å‡ºç°çš„å€¼`ï¼Œ`å¦‚æœé‡åˆ°å½“å‰çš„èŠ‚ç‚¹å¯ä»¥æ»¡è¶³åœ¨å·²ç»è®°å½•çš„Setä¸­`æ‰¾åˆ°ä¸€ä¸ª`k-node.val`çš„å€¼åˆ™`è¯´æ˜è¿™æ£µæ ‘å­˜åœ¨ä¸¤ä¸ªå…ƒç´ ä¸”ä»–ä»¬çš„å’Œç­‰äºç»™å®šçš„ç›®æ ‡ç»“æœ`ã€‚

> åˆ©ç”¨BSTçš„ç‰¹æ€§æ¥åšå‡ºæœ¬é¢˜ä¹Ÿæ˜¯å¯ä»¥çš„

> [ä¸‰å¶å§å§â€”â€”åŒæŒ‡é’ˆ + BST ä¸­åºéå†](https://leetcode-cn.com/problems/two-sum-iv-input-is-a-bst/solution/by-ac_oier-zr4o/)
- æ€è·¯2ï¼šæ ¹æ®ä¸‰å¶å§å§ç»™å‡ºçš„æ€è·¯æˆ‘ä»¬å¾ˆå®¹æ˜“å°±èƒ½ç†è§£è¿™é“é¢˜äº†ï¼Œå¯¹äºBSTæˆ‘ä»¬å¯ä»¥çŸ¥é“å…¶ä¸­åºéå†æ˜¯æœ‰åºçš„ï¼Œé‚£ä¹ˆ`å¦‚æœå°†è¯¥æ ‘çš„æœ€å·¦é“¾ä¸æœ€å³é“¾åˆ†åˆ«åŠ å…¥æ ˆä¸­`ï¼Œå¾ˆå®¹æ˜“çŸ¥é“çš„å°±æ˜¯`æ¯ä¸ªæ ˆçš„æ ˆé¡¶æ— éBSTä¸­çš„æœ€å°å€¼ä¸æœ€å¤§å€¼åˆ†åˆ«å¯¹åº”`ï¼Œç„¶åå°±å®¹æ˜“äº†ï¼Œ`æ—¢ç„¶å‡ºç°äº†æœ€å°å€¼ä¸æœ€å¤§å€¼`ï¼Œå¦‚æœæ ‘ä¸­`å­˜åœ¨ä¸€ä¸ªå€¼çš„è¯æ»¡è¶³å·¦å€¼+å³å€¼ = kåˆ™è¯´æ˜å¯ä»¥æ‰¾åˆ°`ï¼Œåä¹‹`å¦‚æœäºŒè€…ä¹‹å’Œå°äº k åˆ™æˆ‘ä»¬éœ€è¦ä»å·¦æ ‘ä¸­æ‰¾åˆ°æ¯”å½“å‰æŒ‡é’ˆç¨å¤§çš„ä¸€ä¸ªæ•°`ï¼Œåœ¨è¿›è¡Œæ¯”è¾ƒï¼Œ`åä¹‹åˆ™ä»å³æ ‘ä¸­æ‰¾åˆ°ä¸€ä¸ªæ¯”å½“å‰æŒ‡é’ˆæ‰€æŒ‡çš„å…ƒç´ ç¨å°çš„ä¸€ä¸ªæ•°`ã€‚ä»¥æ­¤å¾ªç¯ï¼Œç›´è‡³å·¦å³æŒ‡é’ˆç¢°æ’ï¼Œè¿˜æ²¡æ‰¾åˆ°å°±è¯´æ˜å½“å‰BSTä¸­æ²¡æœ‰è¯¥å…ƒç´ ã€‚
## ä»£ç å®ç°
**éå†+å“ˆå¸ŒSet**
```java
class Solution {
    Set<Integer> set = new HashSet<>();
    int k ;
    public boolean findTarget(TreeNode root, int k) {
        this.k = k;
        return preorder(root);
    }
    // åŠ æ·±ä¸€ééé€’å½’æ–¹å¼çš„å‰åºéå†çš„æ¿å­ä¹¦å†™
    boolean preorder(TreeNode root){
        Stack<TreeNode> stack = new Stack<>();
        if (root == null )return false;
        stack.push(root);
        while (!stack.isEmpty()){
            TreeNode node = stack.pop();
            if (node != null){
                if(node.right != null)stack.push(node.right);
                if(node.left != null )stack.push(node.left);
                stack.push(node);
                stack.push(null);
            }else {
                node = stack.pop();
                if (set.contains(k - node.val))return true;
                set.add(node.val);
            }
        }
        return false;
    }
}
```

- **æ—¶é—´å¤æ‚åº¦:** O($n$)   nä»£è¡¨çš„æ˜¯äºŒå‰æ ‘çš„å¤§å°
- **ç©ºé—´å¤æ‚åº¦:** O($n$)   é¢å¤–æ„å»ºäº†ä¸€ä¸ªå¤§å°ä¸ºnçš„Setç©ºé—´

**BSTä¸­åºéå†+åŒæŒ‡é’ˆ**
```java
class Solution {
    public boolean findTarget(TreeNode root, int k) {
        Deque<TreeNode>leftDeque = new ArrayDeque<>();
        Deque<TreeNode>rightDeque = new ArrayDeque<>();
        TreeNode node = root;
        while (node!=null){
            leftDeque.addLast(node);
            node = node.left;
        }
        node = root;
        while(node!=null){
            rightDeque.addLast(node);
            node = node.right;
        }
        
        TreeNode l = leftDeque.peekLast();
        TreeNode r = rightDeque.peekLast();
        while (l.val < r.val){
            int target = l.val + r.val;
            if (target == k)return true;
            if (target < k){
                l = getNext(leftDeque,true);
            }else {
                r = getNext(rightDeque,false);
            }
        }
        return false;
    }
    // å¦‚æœå½“å‰äºŒè€…çš„å€¼å°äº k åˆ™éœ€è¦ä»å·¦å­æ ‘æ‰¾åˆ°ä¸€ä¸ªæ¯”å½“å‰å€¼å¤§çš„å€¼ è€Œå¤§äºkæ—¶åˆ™éœ€è¦ä»å³å­æ ‘æ‰¾åˆ°ä¸€ä¸ªæ¯”å½“å‰å€¼å°çš„å€¼
    TreeNode getNext(Deque<TreeNode> dq ,boolean isLeft){
        TreeNode node = isLeft ? dq.pollLast().right : dq.pollLast().left;
        while (node != null){
            dq.addLast(node);
            node = isLeft ? node.left : node.right;
        }
        return dq.peekLast();
    }
}
```
- **æ—¶é—´å¤æ‚åº¦:** O($n$)   nä»£è¡¨çš„æ˜¯äºŒå‰æ ‘çš„å¤§å°
- **ç©ºé—´å¤æ‚åº¦:** O($n$)   é¢å¤–æ„å»ºäº†ä¸€ä¸ªå¤§å°ä¸ºnçš„Setç©ºé—´
## è¿è¡Œç»“æœ
**éå†+å“ˆå¸ŒSet**

![image.png](https://pic.leetcode-cn.com/1647848767-fqBEME-image.png)

**BSTä¸­åºéå†+åŒæŒ‡é’ˆ**

![image.png](https://pic.leetcode-cn.com/1647848749-NBBjXQ-image.png)

